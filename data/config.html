<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configurações de WiFi e Servidor</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body onload="recuperarConfiguracoes()">
    <div class="container">
        <h2>Configurações de WiFi</h2>
        <div class="zonas-container">
            <div class="zona">
                <h3>Rede WiFi</h3>
                <div class="zona-colunas">
                    <div>
                        <label for="ssid">SSID:</label>
                        <input type="text" id="ssid" name="ssid" placeholder="Digite o nome da rede WiFi">
                    </div>
                    <div>
                        <label for="senha">Senha:</label>
                        <input type="password" id="senha" name="senha" placeholder="Digite a senha do WiFi">
                    </div>
                </div>
            </div>
            <h2>Configurações do Servidor de Alerta</h2>
            <div class="zona-colunas">
                <div>
                    <label for="ip-servidor">IP do Servidor:</label>
                    <input type="text" id="ip-servidor" name="ip-servidor" placeholder="Digite o IP do servidor">
                </div>
                <div>
                    <label for="porta-servidor">Porta do Servidor:</label>
                    <input type="text" id="porta-servidor" name="porta-servidor"
                        placeholder="Digite a porta do servidor">
                </div>
            </div>
        </div>
        <h2>Configurações de Zonas</h2>
        <div class="zonas-container">
            <div class="zona">
                <h3>Zona 1</h3>
                <div class="zona-colunas">
                    <div>
                        <label for="inicio-zona-1">Início:</label>
                        <input type="text" id="inicio-zona-1" name="inicio-zona-1"
                            placeholder="Digite o início da zona 1">
                    </div>
                    <div>
                        <label for="fim-zona-1">Fim:</label>
                        <input type="text" id="fim-zona-1" name="fim-zona-1" placeholder="Digite o fim da zona 1">
                    </div>
                </div>
            </div>
            <div class="zona">
                <h3>Zona 2</h3>
                <div class="zona-colunas">
                    <div>
                        <label for="inicio-zona-2">Início:</label>
                        <input type="text" id="inicio-zona-2" name="inicio-zona-2"
                            placeholder="Digite o início da zona 2">
                    </div>
                    <div>
                        <label for="fim-zona-2">Fim:</label>
                        <input type="text" id="fim-zona-2" name="fim-zona-2" placeholder="Digite o fim da zona 2">
                    </div>
                </div>
            </div>
            <div class="zona">
                <h3>Zona 3</h3>
                <div class="zona-colunas">
                    <div>
                        <label for="inicio-zona-3">Início:</label>
                        <input type="text" id="inicio-zona-3" name="inicio-zona-3"
                            placeholder="Digite o início da zona 3">
                    </div>
                    <div>
                        <label for="fim-zona-3">Fim:</label>
                        <input type="text" id="fim-zona-3" name="fim-zona-3" placeholder="Digite o fim da zona 3">
                    </div>
                </div>
            </div>
        </div>

        <button type="button" class="btn" onclick="salvarConfiguracoes()">Salvar Configurações</button>
        <button type="button" class="btn" onclick="recuperarConfiguracoes()">Recuperar Configurações</button>
    </div>

    <script>
        // Função para salvar as configurações no servidor
        function salvarConfiguracoes() {
            const data = {
                ssid: document.getElementById('ssid').value,
                senha: document.getElementById('senha').value,
                "ip-servidor": document.getElementById('ip-servidor').value,
                "porta-servidor": document.getElementById('porta-servidor').value,
                "inicio-zona-1": document.getElementById('inicio-zona-1').value,
                "fim-zona-1": document.getElementById('fim-zona-1').value,
                "inicio-zona-2": document.getElementById('inicio-zona-2').value,
                "fim-zona-2": document.getElementById('fim-zona-2').value,
                "inicio-zona-3": document.getElementById('inicio-zona-3').value,
                "fim-zona-3": document.getElementById('fim-zona-3').value
            };

            fetch('/salvar', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
                .then(response => response.text())
                .then(data => {
                    alert(data);
                })
                .catch((error) => {
                    console.error('Erro:', error);
                });
        }

        // Função para recuperar as configurações do servidor
        function recuperarConfiguracoes() {
            fetch('/recuperar')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('ssid').value = data.ssid;
                    document.getElementById('senha').value = data.senha;
                    document.getElementById('ip-servidor').value = data.ipServidor;
                    document.getElementById('porta-servidor').value = data.portaServidor;
                    document.getElementById('inicio-zona-1').value = data.inicioZona1;
                    document.getElementById('fim-zona-1').value = data.fimZona1;
                    document.getElementById('inicio-zona-2').value = data.inicioZona2;
                    document.getElementById('fim-zona-2').value = data.fimZona2;
                    document.getElementById('inicio-zona-3').value = data.inicioZona3;
                    document.getElementById('fim-zona-3').value = data.fimZona3;
                })
                .catch((error) => {
                    console.error('Erro:', error);
                });
        }

    </script>
</body>

</html>